import{s as $}from"./sidebar-4ccd97b1.js";import{g as N,p as C,s as g,a as p}from"./pagination-63ba9440.js";import{d as E,c as M,u as L,a as U}from"./customers-4dd0c60d.js";import{_ as u,o as i,c as n,a as e,k as y,t as j,d as m,r as b,F as S,e as V,f as v,l as A,i as O,g as c,v as r,M as x,b as f,j as z}from"./index-f90c7f84.js";const q={props:["object"],methods:{openModal(o){this.$emit("showDetailsCard",o)},getImage(o){this.image=N(o)},async deleteObject(){confirm("Do you really want to delete object")&&(await E(this.object._id)).data&&this.$emit("objectDeleted",this.object._id)}},data(){return{image:null}},created(){}},F={key:0,class:"row border-dark mx-3 mt-3 shadow border-botom mb-4 px-2 py-2 bg-light"},T={class:"col-lg-3"},B=e("span",{class:"small fw-bold d-lg-none d-block mb-0 lh-1 mt-2"},"Name/Last name:",-1),I={class:"col-lg-3"},P=e("span",{class:"small fw-bold d-lg-none d-block mb-0 lh-1 mt-2"},"Email:",-1),R={class:"col-lg col-12 text-end"},K={class:"row h-100 g-0 align-items-center justify-content-lg-end justify-content-between"},G={class:"col-lg-auto col text-center pointer bg-warning px-3 py-2",title:"Uredi"},H=e("i",{class:"las la-pen la-lg"},null,-1),J=[H],Q={class:"col-lg-auto col text-center pointer bg-warning px-3 py-2",title:"Obrisi objekt"},W=e("i",{class:"las la-trash la-lg"},null,-1),X=[W];function Y(o,t,d,_,s,l){return d.object?(i(),n("div",F,[e("div",T,[B,y(" "+j(d.object.firstName)+" "+j(d.object.lastName),1)]),e("div",I,[P,y(" "+j(d.object.email.toLowerCase()),1)]),e("div",R,[e("div",K,[e("div",G,[e("div",null,[e("div",{onClick:t[0]||(t[0]=a=>l.openModal(d.object._id))},J)])]),e("div",Q,[e("div",null,[e("div",{onClick:t[1]||(t[1]=a=>l.deleteObject(d.object._id))},X)])])])])])):m("",!0)}const Z=u(q,[["render",Y]]),ee={props:["customers"],components:{customer_list_card:Z},data(){return{}},created(){console.log(this.customers)},methods:{openModal(o){this.$emit("showDetails",o)},passDeletedToList(o){this.$emit("emitDeleteObject",o)}}},te={key:0,class:"object-list"},oe=A('<div class="row mx-3 mt-3 d-lg-flex d-none"><div class="col-lg-3"><div class="fw-bold">Name/Last name</div></div><div class="col-lg-3"><div class="fw-bold">Email</div></div></div>',1);function se(o,t,d,_,s,l){const a=b("customer_list_card");return d.customers?(i(),n("div",te,[oe,(i(!0),n(S,null,V(d.customers,h=>(i(),v(a,{object:h,onShowDetailsCard:l.openModal,onObjectDeleted:l.passDeletedToList},null,8,["object","onShowDetailsCard","onObjectDeleted"]))),256))])):m("",!0)}const ae=u(ee,[["render",se]]),le={props:["_id"],data(){return{object:null}},async mounted(){let o=await M({_id:this._id});this.object=o.data.customers[0],console.log(this.object)},methods:{async updateObject(){let o=await L(this.object);this.$emit("postUpdate",o.data)}}},de={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ie={class:"modal-dialog"},ne=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"exampleModalLabel"},"Edit object"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ce={class:"modal-body"},re={key:0},me={class:"row"},be={class:"mt-3 sadrzaj col-lg-6 col-12"},ue=e("label",{for:"objectName",class:"form-label mb-0 mt-2 text-dark"}," First name",-1),_e={class:"mt-3 sadrzaj col-lg-6 col-12"},he=e("label",{for:"objectName",class:"form-label mb-0 mt-2 text-dark"}," Last name",-1),pe={class:"mt-3 sadrzaj col-12"},je=e("label",{for:"objectName",class:"form-label mb-0 mt-2 text-dark"}," Email",-1),fe=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),e("button",{type:"submit",class:"btn btn-primary"},"Save changes")],-1);function ve(o,t,d,_,s,l){return i(),n("div",de,[e("div",ie,[e("form",{class:"modal-content",onSubmit:t[3]||(t[3]=O((...a)=>l.updateObject&&l.updateObject(...a),["prevent"]))},[ne,e("div",ce,[s.object?(i(),n("div",re,[e("div",me,[e("div",be,[e("div",null,[ue,c(e("input",{type:"text",required:"","onUpdate:modelValue":t[0]||(t[0]=a=>s.object.firstName=a),name:"name",id:"",class:"form-control border border-dark"},null,512),[[r,s.object.firstName]])])]),e("div",_e,[e("div",null,[he,c(e("input",{type:"text",required:"","onUpdate:modelValue":t[1]||(t[1]=a=>s.object.lastName=a),name:"name",id:"",class:"form-control border border-dark"},null,512),[[r,s.object.lastName]])])]),e("div",pe,[e("div",null,[je,c(e("input",{type:"text",required:"","onUpdate:modelValue":t[2]||(t[2]=a=>s.object.email=a),name:"name",id:"",class:"form-control border border-dark"},null,512),[[r,s.object.email]])])])])])):m("",!0)]),fe],32)])])}const ge=u(le,[["render",ve]]),ye={data(){return{object:{}}},async mounted(){},methods:{async addObject(){let o=await U(this.object);o.data._id&&this.$emit("objectAdded",{name:o.data.object_id}),this.object={}}}},xe={class:"modal fade",id:"addObjectModal",tabindex:"-1","aria-labelledby":"addObjectModalLabel","aria-hidden":"true"},Me={class:"modal-dialog"},Oe=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"exampleModalLabel"},"Edit object"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ke={class:"modal-body"},we={key:0},De={class:"row"},$e={class:"mt-3 sadrzaj col-lg-6 col-12"},Ne=e("label",{for:"objectName",class:"form-label mb-0 mt-2 text-dark"}," First name",-1),Ce={class:"mt-3 sadrzaj col-lg-6 col-12"},Ee=e("label",{for:"objectName",class:"form-label mb-0 mt-2 text-dark"}," Last name",-1),Le={class:"mt-3 sadrzaj col-12"},Ue=e("label",{for:"objectName",class:"form-label mb-0 mt-2 text-dark"}," Email",-1),Se=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),e("button",{type:"submit",class:"btn btn-primary"},"Save changes")],-1);function Ve(o,t,d,_,s,l){return i(),n("div",xe,[e("div",Me,[e("form",{class:"modal-content",onSubmit:t[3]||(t[3]=O((...a)=>l.addObject&&l.addObject(...a),["prevent"]))},[Oe,e("div",ke,[s.object?(i(),n("div",we,[e("div",De,[e("div",$e,[e("div",null,[Ne,c(e("input",{type:"text",required:"","onUpdate:modelValue":t[0]||(t[0]=a=>s.object.firstName=a),name:"name",id:"",class:"form-control border border-dark"},null,512),[[r,s.object.firstName]])])]),e("div",Ce,[e("div",null,[Ee,c(e("input",{type:"text",required:"","onUpdate:modelValue":t[1]||(t[1]=a=>s.object.lastName=a),name:"name",id:"",class:"form-control border border-dark"},null,512),[[r,s.object.lastName]])])]),e("div",Le,[e("div",null,[Ue,c(e("input",{type:"text",required:"","onUpdate:modelValue":t[2]||(t[2]=a=>s.object.email=a),name:"name",id:"",class:"form-control border border-dark"},null,512),[[r,s.object.email]])])])])])):m("",!0)]),Se],32)])])}const Ae=u(ye,[["render",Ve]]),ze={data(){return{formData:[{name:"name",label:"Naziv",value:"",type:"text"},{name:"email",label:"Email",value:"",type:"text"}],customers:[],count:0,skip:1,_openEditModal:null,_addObjectModal:null,_id:null}},components:{sidebar:$,objectList:ae,pagination:C,editModal:ge,addModal:Ae},methods:{formChange(o){o.skip=1,g(o),this.getObjects(o)},pageChange(o){let t=p();t.skip=o.skip,g(t),this.getObjects(t)},async getObjects(o={}){o.skip&&(this.skip=+o.skip),this.customers=[];let t=await M(o);this.count=t.data.count,this.customers=t.data.customers},updateObjectInDOM(o){o&&o._id&&this.customers.forEach((t,d)=>{t._id===o._id&&(this.customers[d]=o)})},openAddObjectModal(){let o=this.$refs.addObjectModalRef.$el;this._addObjectModal=new x(o,{}),this._addObjectModal.show()},closeAddObjectModal(o){this._addObjectModal.hide(),this.formChange(o)},openEditModal(o){this._openEditModal=null,this._openEditModal="editModal",this._id=o,setTimeout(()=>{let t=this.$refs.modal.$el;console.log(t),new x(t,{}).show(),t.addEventListener("hidden.bs.modal",()=>{this._openEditModal=null})},100)},async removeObjectFromDom(o){let t=p();await this.getObjects(t)}},async mounted(){let o=p();this.formData.forEach(t=>{t.type=="number"&&o[t.name]>0&&(t.value=o[t.name]),t.type=="checkbox"&&o[t.name]?t.value=!0:o[t.name]&&(t.value=o[t.name])}),await this.getObjects(o)}},qe={class:"row g-0"},Fe={class:"col-lg-2 pe-lg-0 col-12"},Te={class:"col"},Be={class:"d-flex justify-content-between my-2 px-3"};function Ie(o,t,d,_,s,l){const a=b("sidebar"),h=b("pagination"),k=b("objectList"),w=b("addModal");return i(),n("div",qe,[e("div",Fe,[f(a,{onSubmit:l.formChange,formData:s.formData},null,8,["onSubmit","formData"])]),e("div",Te,[e("div",Be,[e("button",{class:"col-lg-auto col btn btn-sm btn-primary py-lg-0 py-3 px-2",onClick:t[0]||(t[0]=(...D)=>l.openAddObjectModal&&l.openAddObjectModal(...D))},"Add new customer"),s.customers.length?(i(),v(h,{key:0,class:"col-lg-auto col-12 mt-lg-0 mt-3",count:s.count,skip:s.skip,limit:20,onPageChange:l.pageChange},null,8,["count","skip","onPageChange"])):m("",!0)]),f(k,{customers:s.customers,onShowDetails:l.openEditModal,onEmitDeleteObject:l.removeObjectFromDom},null,8,["customers","onShowDetails","onEmitDeleteObject"])]),s._openEditModal?(i(),v(z(s._openEditModal),{key:0,ref:"modal",_id:s._id,onPostUpdate:l.updateObjectInDOM},null,40,["_id","onPostUpdate"])):m("",!0),f(w,{ref:"addObjectModalRef",onObjectAdded:l.closeAddObjectModal},null,8,["onObjectAdded"])])}const He=u(ze,[["render",Ie]]);export{He as default};
